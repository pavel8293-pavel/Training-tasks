{"version":3,"sources":["CurrencyInput.js","App.js","index.js"],"names":["CurrencyInput","props","currencyCodes","className","type","value","amount","toString","onChange","valueHandler","currency","onChangeCurrency","map","valute","App","toAmount","fromAmount","useState","error","setError","isLoaded","setIsLoaded","valutes","setValutes","setCurrencyCodes","inputCurrency","setInputCurrency","outputCurrency","setOutputCurrency","setAmount","inputAmount","setInputAmount","exchangeRate","setExchangeRate","useEffect","fetch","then","response","json","data","Value","Nominal","Valute","Object","keys","defaultInputCurrency","CharCode","message","e","target","ReactDOM","render","document","getElementById"],"mappings":"wOAGe,SAASA,EAAcC,GAClC,IAAMC,EAAgBD,EAAMC,cAC5B,OACI,sBAAKC,UAAU,iBAAf,UACI,uBAAOC,KAAK,SAASC,MAAOJ,EAAMK,OAAOC,WAAaC,SAAUP,EAAMQ,eACtE,yBAAQJ,MAAOJ,EAAMS,SAAUF,SAAUP,EAAMU,iBAA/C,UACA,wBAAQN,MAAM,MAAd,gBAAwB,OACnBH,EAAcU,KAAI,SAAAC,GACf,OACI,wBAAQR,MAAOQ,EAAf,SACKA,GADuBA,YCRpD,IAoGeC,EAlGH,WAAO,IAqCXC,EAAUC,EArCA,EACYC,mBAAS,MADrB,mBACPC,EADO,KACAC,EADA,OAEkBF,oBAAS,GAF3B,mBAEPG,EAFO,KAEGC,EAFH,OAGgBJ,mBAAS,IAHzB,mBAGPK,EAHO,KAGEC,EAHF,OAI4BN,mBAAS,IAJrC,mBAIPf,EAJO,KAIQsB,EAJR,OAK4BP,mBAAS,IALrC,mBAKPQ,EALO,KAKQC,EALR,OAM8BT,mBAAS,OANvC,mBAMPU,EANO,KAMSC,EANT,OAOcX,mBAAS,IAPvB,mBAOPX,EAPO,KAOCuB,EAPD,OAQwBZ,oBAAS,GARjC,mBAQPa,EARO,KAQMC,EARN,OAS0Bd,qBAT1B,mBASPe,EATO,KASOC,EATP,KAYdC,qBAAU,WACNC,MAfa,8CAgBRC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACFlB,GAAY,GACZE,EAAW,aACP,IAAO,CACHiB,MAAO,EACPC,QAAS,IACPF,EAAKG,SAEflB,EAAiBmB,OAAOC,KAAKL,EAAKG,SAElC,IAAMG,EAAuBN,EAAKG,OAAL,IAAmBI,SAEhDpB,EAAiBmB,GACjBZ,EAAiBM,EAAKG,OAAL,IAAmBF,MAAQD,EAAKG,OAAL,IAAmBD,QAFpC,MAK3B,SAACvB,GACGG,GAAY,GACZF,EAASD,QAEtB,IAICY,GACAd,EAAaV,EACbS,EAAWT,EAAS0B,IAEpBhB,EAAaV,EAAS0B,EACtBjB,EAAWT,GA0Bf,OAAIY,EACO,yEAAcA,EAAM6B,WACnB3B,EAIJ,sBAAKjB,UAAU,UAAf,UACI,oDACA,sBAAKA,UAAU,qBAAf,UACI,cAAC,EAAD,CACID,cAAeA,EACfQ,SAAUe,EACVd,iBAnCQ,SAACqC,GACzBtB,EAAiBsB,EAAEC,OAAO5C,OAC1B4B,EAAiBX,EAAQ0B,EAAEC,OAAO5C,OAAOmC,MAAQlB,EAAQ0B,EAAEC,OAAO5C,OAAOoC,SAAYnB,EAAQK,GAAgBa,MAAQlB,EAAQK,GAAgBc,WAkC7HnC,OAAQU,EACRP,aAzBD,SAACuC,GAChBnB,EAAUmB,EAAEC,OAAO5C,OACnB0B,GAAe,MAyBH,cAAC,EAAD,CACI7B,cAAeA,EACfQ,SAAUiB,EACVhB,iBArCS,SAACqC,GAC1BpB,EAAkBoB,EAAEC,OAAO5C,OAC3B4B,EAAiBX,EAAQG,GAAee,MAAQlB,EAAQG,GAAegB,SAAYnB,EAAQ0B,EAAEC,OAAO5C,OAAOmC,MAAQlB,EAAQ0B,EAAEC,OAAO5C,OAAOoC,WAoC3HnC,OAAQS,EACRN,aA1BA,SAACuC,GACjBnB,EAAUmB,EAAEC,OAAO5C,OACnB0B,GAAe,YAMR,uFCzEfmB,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.82c22722.chunk.js","sourcesContent":["import React from 'react'\r\nimport './CurrencyInput.css'\r\n\r\nexport default function CurrencyInput(props) {\r\n    const currencyCodes = props.currencyCodes\r\n    return (\r\n        <div className=\"currency-input\">\r\n            <input type=\"number\" value={props.amount.toString()}  onChange={props.valueHandler}/>\r\n            <select value={props.currency} onChange={props.onChangeCurrency} >\r\n            <option value=\"RUB\" key=\"RUB\">RUB</option>\r\n                {currencyCodes.map(valute => {\r\n                    return (\r\n                        <option value={valute} key={valute}>\r\n                            {valute}\r\n                        </option>\r\n                    )\r\n                })\r\n                }\r\n            </select>\r\n        </div>\r\n    )\r\n}\r\n","import './App.css'\r\nimport CurrencyInput from './CurrencyInput.js'\r\nimport React, { useState, useEffect } from 'react'\r\n\r\nconst CURRENCY_API = 'https://www.cbr-xml-daily.ru/daily_json.js'\r\n\r\nconst App = () => {\r\n    const [error, setError] = useState(null);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n    const [valutes, setValutes] = useState([]);\r\n    const [currencyCodes, setCurrencyCodes] = useState([])\r\n    const [inputCurrency, setInputCurrency] = useState('')\r\n    const [outputCurrency, setOutputCurrency] = useState('RUB')\r\n    const [amount, setAmount] = useState('')\r\n    const [inputAmount, setInputAmount] = useState(true)\r\n    const [exchangeRate, setExchangeRate] = useState()\r\n\r\n\r\n    useEffect(() => {\r\n        fetch(CURRENCY_API)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setIsLoaded(true);\r\n                setValutes({\r\n                    \"RUB\": {\r\n                        Value: 1,\r\n                        Nominal: 1\r\n                    }, ...data.Valute\r\n                });\r\n                setCurrencyCodes(Object.keys(data.Valute))\r\n\r\n                const defaultInputCurrency = data.Valute[\"USD\"].CharCode\r\n                const defaultRUBCurrency = 1\r\n                setInputCurrency(defaultInputCurrency)\r\n                setExchangeRate((data.Valute[\"USD\"].Value / data.Valute[\"USD\"].Nominal) / defaultRUBCurrency)\r\n\r\n            },\r\n                (error) => {\r\n                    setIsLoaded(true);\r\n                    setError(error);\r\n                })\r\n    }, [])\r\n\r\n    let toAmount, fromAmount\r\n\r\n    if (inputAmount) {\r\n        fromAmount = amount\r\n        toAmount = amount * exchangeRate\r\n    } else {\r\n        fromAmount = amount / exchangeRate\r\n        toAmount = amount\r\n    }\r\n\r\n    const SetNewInputCurrency = (e) => {\r\n        setInputCurrency(e.target.value)\r\n        setExchangeRate((valutes[e.target.value].Value / valutes[e.target.value].Nominal) / (valutes[outputCurrency].Value / valutes[outputCurrency].Nominal))\r\n    }\r\n\r\n    const SetNewOutputCurrency = (e) => {\r\n        setOutputCurrency(e.target.value)\r\n        setExchangeRate((valutes[inputCurrency].Value / valutes[inputCurrency].Nominal) / (valutes[e.target.value].Value / valutes[e.target.value].Nominal))\r\n\r\n\r\n    }\r\n\r\n    const inputValue = (e) => {\r\n        setAmount(e.target.value)\r\n        setInputAmount(true)\r\n    }\r\n\r\n\r\n    const outputValue = (e) => {\r\n        setAmount(e.target.value)\r\n        setInputAmount(false)\r\n    }\r\n\r\n    if (error) {\r\n        return <div>Ошибка: {error.message}</div>;\r\n    } else if (!isLoaded) {\r\n        return <div>Загрузка...</div>;\r\n    } else {\r\n        return (\r\n            <div className=\"wrapper\">\r\n                <h1>Currency converter</h1>\r\n                <div className=\"currency-container\">\r\n                    <CurrencyInput\r\n                        currencyCodes={currencyCodes}\r\n                        currency={inputCurrency}\r\n                        onChangeCurrency={SetNewInputCurrency}\r\n                        amount={fromAmount}\r\n                        valueHandler={inputValue}\r\n                    />\r\n                    <CurrencyInput\r\n                        currencyCodes={currencyCodes}\r\n                        currency={outputCurrency}\r\n                        onChangeCurrency={SetNewOutputCurrency}\r\n                        amount={toAmount}\r\n                        valueHandler={outputValue}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}